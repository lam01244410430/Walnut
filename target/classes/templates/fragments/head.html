<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="main_header" class="navbar">

    <div style="display: flex; align-items: center;">
        <a href="/" class="brand" style="font-size: 20px; font-weight: bold; color: #ffeb3b; text-decoration: none;">
            🌱 掌上核桃 (Palm Walnut)
        </a>

        <div style="margin-left: 40px;">
            <a href="/">首页 (Trang chủ)</a>

            <a th:if="${session.role == 'FARMER'}" href="/search">🔍 病害查询</a>
            <a th:if="${session.role == 'ADMIN'}" href="/admin/dashboard">📊 管理后台</a>
        </div>
    </div>

    <div style="margin-left: auto;">

        <a th:if="${session.user == null}" href="/login"
           style="background: #ffeb3b; color: #1b5e20; padding: 8px 20px; border-radius: 20px; text-decoration: none; font-weight: bold;">
            👤 登录 / 注册 (Đăng nhập)
        </a>

        <div th:if="${session.user != null}" class="user-dropdown">

            <span style="color: white; font-weight: 500;">
                👋 你好, <span th:text="${session.user.name}"></span> ▼
            </span>

            <div class="dropdown-menu">

                <div class="role-badge">
                    身份: <span th:text="${session.role == 'ADMIN' ? '管理员 (Admin)' : (session.role == 'EXPERT' ? '专家 (Expert)' : '农户 (Farmer)')}"></span>
                </div>

                <a th:if="${session.role == 'ADMIN'}" href="/admin/dashboard">🖥️ 进入后台 (Dashboard)</a>
                <a th:if="${session.role == 'ADMIN'}" href="/admin/upload">☁️ 数据上传 (Upload)</a>

                <a th:if="${session.role == 'EXPERT'}" href="/expert/dashboard">👨‍🏫 专家工作台 (Workplace)</a>

                <a th:if="${session.role == 'FARMER'}" href="/consultation">💬 我的咨询 (Hỏi đáp)</a>

                <a href="/logout" class="logout-item">🚪 退出登录 (Đăng xuất)</a>
            </div>
        </div>

    </div>
</div>
</body>
</html>